(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{393:function(v,_,e){"use strict";e.r(_);var t=e(45),l=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[v._v("#")]),v._v(" 性能优化")]),v._v(" "),e("p",[v._v("性能优化分为几个方面：")]),v._v(" "),e("ul",[e("li",[v._v("框架层面；")]),v._v(" "),e("li",[v._v("代码构建与图片压缩层面；")]),v._v(" "),e("li",[v._v("网络请求层面；")]),v._v(" "),e("li",[v._v("应用加载与执行渲染层面；")]),v._v(" "),e("li",[v._v("感官体验优化层面；")])]),v._v(" "),e("h2",{attrs:{id:"框架层面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#框架层面"}},[v._v("#")]),v._v(" 框架层面")]),v._v(" "),e("p",[e("strong",[v._v("Vue3")])]),v._v(" "),e("p",[v._v("Vue3 主要做了体积优化（Tree-shaking）、编译优化和响应式系统优化，编译优化又分为：")]),v._v(" "),e("ul",[e("li",[v._v("diff算法优化；")]),v._v(" "),e("li",[v._v("静态提升；")]),v._v(" "),e("li",[v._v("事件监听缓存；")]),v._v(" "),e("li",[v._v("SSR优化；")])]),v._v(" "),e("p",[e("strong",[v._v("React")])]),v._v(" "),e("p",[v._v("由于 React 是细粒度更低的应用级框架，它将性能优化的几个方法交给用户使用。")]),v._v(" "),e("p",[v._v("在 React18 以前：")]),v._v(" "),e("ul",[e("li",[v._v("shouldComponentUpdate（通过对比 state 和 props 确定是否要重新渲染）；")]),v._v(" "),e("li",[v._v("PureComponent（与 shouldComponentUpdate 类似）；")]),v._v(" "),e("li",[v._v("使用 Immutable（减少渲染次数）；")]),v._v(" "),e("li",[v._v("避免使用内联函数（render 时不会创建单独的函数实例）；")]),v._v(" "),e("li",[v._v("事件绑定方式（在constructor 中预先 bind 当前组件，避免 render 操作中重复绑定）；")])]),v._v(" "),e("p",[v._v("在 React 18 及之后：")]),v._v(" "),e("ul",[e("li",[v._v("useState 中，避免重复创建初始状态；")]),v._v(" "),e("li",[v._v("useEffect 中，设置正确的依赖项，避免反复调用 Effect 函数；")]),v._v(" "),e("li",[v._v("使用 useMemo 和 useCallback 防止在传递对象或者函数时重新渲染；")]),v._v(" "),e("li",[v._v("使用 useMemo 缓存复杂计算结果；")])]),v._v(" "),e("p",[v._v("除此之外， 常见性能优化常见的手段有如下：")]),v._v(" "),e("ul",[e("li",[v._v("使用 React Fragments 避免额外标签（可以简写为 <>...</>，如果要传入 key，请从 react 中导入 Fragment）；")]),v._v(" "),e("li",[v._v("使用 React.memo（缓存组件，允许你的组件在 props 没有改变的情况下跳过重新渲染）；")]),v._v(" "),e("li",[v._v("懒加载组件（Suspense、lazy）；")]),v._v(" "),e("li",[v._v("SSR 渲染；")])]),v._v(" "),e("h2",{attrs:{id:"代码构建与图片压缩层面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码构建与图片压缩层面"}},[v._v("#")]),v._v(" 代码构建与图片压缩层面")]),v._v(" "),e("p",[v._v("主要是通过 Webpack、Rollup 等模块打包工具，来达到：")]),v._v(" "),e("ul",[e("li",[v._v("JS 代码压缩；")]),v._v(" "),e("li",[v._v("CSS 代码压缩；")]),v._v(" "),e("li",[v._v("Html 文件代码压缩；")]),v._v(" "),e("li",[v._v("文件大小压缩；")]),v._v(" "),e("li",[v._v("图片压缩（如 tinypng）；")]),v._v(" "),e("li",[v._v("Tree Shaking；")]),v._v(" "),e("li",[v._v("Code Splitting（代码分离）；")]),v._v(" "),e("li",[v._v("内联 chunk；")])]),v._v(" "),e("p",[v._v("等优化效果。")]),v._v(" "),e("h2",{attrs:{id:"网络请求层面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络请求层面"}},[v._v("#")]),v._v(" 网络请求层面")]),v._v(" "),e("p",[v._v("网络层面的优化，主要有以下手段：")]),v._v(" "),e("ul",[e("li",[v._v("DNS 预解析、预加载、预渲染；")]),v._v(" "),e("li",[v._v("离线化（ServiceWorker、AppCache、离线包等）；")]),v._v(" "),e("li",[v._v("HTTP 缓存；")]),v._v(" "),e("li",[v._v("数据缓存（localStorage、sessionStorage）；")]),v._v(" "),e("li",[v._v("资源加载（async、defer 标签）；")]),v._v(" "),e("li",[v._v("请求合并；")]),v._v(" "),e("li",[v._v("HTTP 2；")]),v._v(" "),e("li",[v._v("CDN（将数据缓存在离用户近的服务器上）；")])]),v._v(" "),e("h2",{attrs:{id:"应用加载与执行渲染层面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用加载与执行渲染层面"}},[v._v("#")]),v._v(" 应用加载与执行渲染层面")]),v._v(" "),e("p",[v._v("主要是通过对 JS、CSS 的执行进行优化，以及减少重排、重绘，有以下手段：")]),v._v(" "),e("ul",[e("li",[v._v("降低 JS 复杂度或者使用 Web Worker；")]),v._v(" "),e("li",[v._v("CSS 代码优化（选择器、启用 GPU、避免表达式等）；")]),v._v(" "),e("li",[v._v("使用 requestAnimationFrame 实现视觉变化；")]),v._v(" "),e("li",[v._v("避免大型、复杂的布局和布局抖动；")]),v._v(" "),e("li",[v._v("简化绘制复杂度、减少绘制区域；")]),v._v(" "),e("li",[v._v("输入处理程序防抖节流；")]),v._v(" "),e("li",[v._v("使用懒加载；")]),v._v(" "),e("li",[v._v("使用 SSR 优化 SEO；")])]),v._v(" "),e("h2",{attrs:{id:"感官体验优化层面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#感官体验优化层面"}},[v._v("#")]),v._v(" 感官体验优化层面")]),v._v(" "),e("p",[v._v("主要是通过一些技术，优化用户体验，主要有以下手段：")]),v._v(" "),e("ul",[e("li",[v._v("骨架屏（使用简单的灰色块和线条，让用户在等待网络请求过程中获得视觉反馈）；")]),v._v(" "),e("li",[v._v("Loading（添加一些过渡动画，减少用户等待焦虑）；")])])])}),[],!1,null,null,null);_.default=l.exports}}]);