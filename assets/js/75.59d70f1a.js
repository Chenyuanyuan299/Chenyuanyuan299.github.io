(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{441:function(t,a,s){"use strict";s.r(a);var e=s(45),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks"}},[t._v("#")]),t._v(" React Hooks")]),t._v(" "),s("h2",{attrs:{id:"usestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),s("h3",{attrs:{id:"usestate-initialstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate-initialstate"}},[t._v("#")]),t._v(" useState(initialState)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("p",[s("code",[t._v("initialState")]),t._v("ï¼šä½ å¸Œæœ› state åˆå§‹åŒ–çš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚åœ¨åˆå§‹æ¸²æŸ“åï¼Œæ­¤å‚æ•°å°†è¢«å¿½ç•¥ã€‚å¦‚æœä¼ é€’å‡½æ•°ä½œä¸º "),s("code",[t._v("initialState")]),t._v("ï¼Œåˆ™å®ƒå°†è¢«è§†ä¸º "),s("strong",[t._v("åˆå§‹åŒ–å‡½æ•°")]),t._v("ã€‚å®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¸åº”è¯¥æ¥å—ä»»ä½•å‚æ•°ï¼Œå¹¶ä¸”åº”è¯¥è¿”å›ä¸€ä¸ªä»»ä½•ç±»å‹çš„å€¼ã€‚å½“åˆå§‹åŒ–ç»„ä»¶æ—¶ï¼ŒReact å°†è°ƒç”¨ä½ çš„åˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼å­˜å‚¨ä¸ºåˆå§‹çŠ¶æ€ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("ol",[s("li",[t._v("å½“å‰çš„ stateã€‚åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä¸ä½ ä¼ é€’çš„ "),s("code",[t._v("initialState")]),t._v(" ç›¸åŒ¹é…ã€‚")]),t._v(" "),s("li",[t._v("set å‡½æ•°ï¼Œå®ƒå¯ä»¥è®©ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"set-å‡½æ•°-ä¾‹å¦‚-setsomething-nextstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-å‡½æ•°-ä¾‹å¦‚-setsomething-nextstate"}},[t._v("#")]),t._v(" set å‡½æ•°ï¼Œä¾‹å¦‚ setSomething(nextState)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("p",[s("code",[t._v("nextState")]),t._v("ï¼šä½ æƒ³è¦ state æ›´æ–°ä¸ºçš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚å¦‚æœä½ å°†å‡½æ•°ä½œä¸º "),s("code",[t._v("nextState")]),t._v(" ä¼ é€’ï¼Œå®ƒå°†è¢«è§†ä¸º "),s("strong",[t._v("æ›´æ–°å‡½æ•°")]),t._v("ã€‚å®ƒå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œåªæ¥å—å¾…å®šçš„ state ä½œä¸ºå…¶å”¯ä¸€å‚æ•°ï¼Œå¹¶åº”è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚React å°†æŠŠä½ çš„æ›´æ–°å‡½æ•°æ”¾å…¥é˜Ÿåˆ—ä¸­å¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼ŒReact å°†é€šè¿‡æŠŠé˜Ÿåˆ—ä¸­æ‰€æœ‰æ›´æ–°å‡½æ•°åº”ç”¨äºå…ˆå‰çš„çŠ¶æ€æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[t._v("set å‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("useState")]),t._v(" æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤ä½ åªèƒ½åœ¨ "),s("strong",[t._v("ç»„ä»¶çš„é¡¶å±‚")]),t._v(" æˆ–è‡ªå·±çš„ Hook ä¸­è°ƒç”¨å®ƒã€‚ä½ ä¸èƒ½åœ¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœä½ éœ€è¦è¿™æ ·åšï¼Œè¯·æå–ä¸€ä¸ªæ–°ç»„ä»¶å¹¶å°†çŠ¶æ€ç§»å…¥å…¶ä¸­ã€‚")]),t._v(" "),s("li",[t._v("åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼ŒReact å°† "),s("strong",[t._v("ä¸¤æ¬¡è°ƒç”¨åˆå§‹åŒ–å‡½æ•°")]),t._v("ï¼Œä»¥ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#my-initializer-or-updater-function-runs-twice",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¸®ä½ æ‰¾åˆ°æ„å¤–çš„ä¸çº¯æ€§"),s("OutboundLink")],1),t._v("ã€‚è¿™åªæ˜¯å¼€å‘æ—¶çš„è¡Œä¸ºï¼Œä¸å½±å“ç”Ÿäº§ã€‚å¦‚æœä½ çš„åˆå§‹åŒ–å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆæœ¬è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå°±ä¸åº”å½±å“è¯¥è¡Œä¸ºã€‚å…¶ä¸­ä¸€ä¸ªè°ƒç”¨çš„ç»“æœå°†è¢«å¿½ç•¥ã€‚")]),t._v(" "),s("li",[s("code",[t._v("set")]),t._v(" å‡½æ•° "),s("strong",[t._v("ä»…æ›´æ–° "),s("em",[t._v("ä¸‹ä¸€æ¬¡")]),t._v(" æ¸²æŸ“çš„çŠ¶æ€å˜é‡")]),t._v("ã€‚å¦‚æœåœ¨è°ƒç”¨ "),s("code",[t._v("set")]),t._v(" å‡½æ•°åè¯»å–çŠ¶æ€å˜é‡ï¼Œåˆ™ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#ive-updated-the-state-but-logging-gives-me-the-old-value",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»ä¼šå¾—åˆ°åœ¨è°ƒç”¨ä¹‹å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—§å€¼"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½ æä¾›çš„æ–°å€¼ä¸å½“å‰ "),s("code",[t._v("state")]),t._v(" ç›¸åŒï¼ˆç”± "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¯”è¾ƒç¡®å®šï¼‰ï¼ŒReact å°† "),s("strong",[t._v("è·³è¿‡é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶")]),t._v("ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ã€‚è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹ React ä»ç„¶éœ€è¦åœ¨è·³è¿‡å­ç»„ä»¶ä¹‹å‰è°ƒç”¨ä½ çš„ç»„ä»¶ï¼Œä½†è¿™ä¸åº”å½±å“ä½ çš„ä»£ç ã€‚")]),t._v(" "),s("li",[t._v("React ä¼š "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/queueing-a-series-of-state-updates",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ‰¹é‡å¤„ç†çŠ¶æ€æ›´æ–°"),s("OutboundLink")],1),t._v("ã€‚å®ƒä¼šåœ¨æ‰€æœ‰ "),s("strong",[t._v("äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œ")]),t._v(" å¹¶è°ƒç”¨å…¶ "),s("code",[t._v("set")]),t._v(" å‡½æ•°åæ›´æ–°å±å¹•ã€‚è¿™å¯ä»¥é˜²æ­¢åœ¨å•ä¸ªäº‹ä»¶æœŸé—´å¤šæ¬¡é‡æ–°æ¸²æŸ“ã€‚åœ¨æŸäº›ç½•è§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å¼ºåˆ¶ React æ›´æ—©åœ°æ›´æ–°å±å¹•ï¼Œä¾‹å¦‚è®¿é—® DOMï¼Œä½ å¯ä»¥ä½¿ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react-dom/flushSync",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("flushSync")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("åœ¨æ¸²æŸ“æœŸé—´ï¼Œåªå…è®¸åœ¨å½“å‰æ¸²æŸ“ç»„ä»¶å†…éƒ¨è°ƒç”¨ "),s("code",[t._v("set")]),t._v(" å‡½æ•°ã€‚React å°†ä¸¢å¼ƒå…¶è¾“å‡ºå¹¶ç«‹å³å°è¯•ä½¿ç”¨æ–°çŠ¶æ€é‡æ–°æ¸²æŸ“ã€‚è¿™ç§æ–¹å¼å¾ˆå°‘éœ€è¦ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å­˜å‚¨ "),s("strong",[t._v("å…ˆå‰æ¸²æŸ“ä¸­çš„ä¿¡æ¯")]),t._v("ã€‚"),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#storing-information-from-previous-renders",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼ŒReact å°† "),s("strong",[t._v("ä¸¤æ¬¡è°ƒç”¨ä½ çš„æ›´æ–°å‡½æ•°")]),t._v("ï¼Œä»¥å¸®åŠ©ä½ æ‰¾åˆ° "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#my-initializer-or-updater-function-runs-twice",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ„å¤–çš„ä¸çº¯æ€§"),s("OutboundLink")],1),t._v("ã€‚è¿™åªæ˜¯å¼€å‘æ—¶çš„è¡Œä¸ºï¼Œä¸å½±å“ç”Ÿäº§ã€‚å¦‚æœä½ çš„æ›´æ–°å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆæœ¬è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå°±ä¸åº”å½±å“è¯¥è¡Œä¸ºã€‚å…¶ä¸­ä¸€æ¬¡è°ƒç”¨çš„ç»“æœå°†è¢«å¿½ç•¥ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"æ ¹æ®å…ˆå‰çš„-state-æ›´æ–°-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ ¹æ®å…ˆå‰çš„-state-æ›´æ–°-state"}},[t._v("#")]),t._v(" æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state")]),t._v(" "),s("p",[t._v("å‡è®¾ age ä¸º 42ï¼Œæƒ³è¦ç‚¹å‡»ä¸€æ¬¡æ›´æ–°ä¸‰ä¸ªçŠ¶æ€ï¼Œè¯·ç»™ set å‡½æ•°ä¼ å…¥æ›´æ–°å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(age + 1); // setAge(42 + 1)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(age + 1); // setAge(42 + 1)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(age + 1); // setAge(42 + 1)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(42 => 43)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(43 => 44)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setAge(44 => 45)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„"}},[t._v("#")]),t._v(" æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„")]),t._v(" "),s("p",[t._v("åœ¨ React ä¸­ï¼Œstate è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤åº”è¯¥æ›¿æ¢å®ƒè€Œä¸æ˜¯æ”¹å˜ç°æœ‰å¯¹è±¡ã€‚æ¯”å¦‚ç›´æ¥é‡ç½®å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼ã€‚")]),t._v(" "),s("p",[t._v("å¯¹äº React state ä¸­çš„å¯¹è±¡ï¼Œå½“å¯¹è±¡çš„å±‚æ¬¡æ¯”è¾ƒå°‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼›å½“å¯¹è±¡çš„å±‚æ¬¡æ¯”è¾ƒå¤šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ "),s("strong",[t._v("Immer")]),t._v("ï¼ŒImmer çš„åº•å±‚ä½¿ç”¨äº† Proxyã€‚")]),t._v(" "),s("p",[t._v("å¯¹äº React state ä¸­çš„æ•°ç»„ï¼Œéœ€è¦é¿å…ä½¿ç”¨å·¦åˆ—çš„æ–¹æ³•ï¼Œè€Œé¦–é€‰å³åˆ—çš„æ–¹æ³•ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("é¿å…ä½¿ç”¨ (ä¼šæ”¹å˜åŸå§‹æ•°ç»„)")]),t._v(" "),s("th",[t._v("æ¨èä½¿ç”¨ (ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼‰")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("æ·»åŠ å…ƒç´ ")]),t._v(" "),s("td",[s("code",[t._v("push")]),t._v("ï¼Œ"),s("code",[t._v("unshift")])]),t._v(" "),s("td",[s("code",[t._v("concat")]),t._v("ï¼Œ"),s("code",[t._v("[...arr]")]),t._v(" å±•å¼€è¯­æ³•")])]),t._v(" "),s("tr",[s("td",[t._v("åˆ é™¤å…ƒç´ ")]),t._v(" "),s("td",[s("code",[t._v("pop")]),t._v("ï¼Œ"),s("code",[t._v("shift")]),t._v("ï¼Œ"),s("code",[t._v("splice")])]),t._v(" "),s("td",[s("code",[t._v("filter")]),t._v("ï¼Œ"),s("code",[t._v("slice")])])]),t._v(" "),s("tr",[s("td",[t._v("æ›¿æ¢å…ƒç´ ")]),t._v(" "),s("td",[s("code",[t._v("splice")]),t._v("ï¼Œ"),s("code",[t._v("arr[i] = ...")]),t._v(" èµ‹å€¼")]),t._v(" "),s("td",[s("code",[t._v("map")])])]),t._v(" "),s("tr",[s("td",[t._v("æ’åº")]),t._v(" "),s("td",[s("code",[t._v("reverse")]),t._v("ï¼Œ"),s("code",[t._v("sort")])]),t._v(" "),s("td",[t._v("å…ˆå°†æ•°ç»„å¤åˆ¶ä¸€ä»½")])])])]),t._v(" "),s("p",[t._v("æˆ–è€…ï¼Œä½¿ç”¨ "),s("strong",[t._v("Immer")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼Œå½“å¯¹è±¡æ˜¯å¤šå±‚çº§çš„ï¼Œæˆ–è€…æ•°ç»„ä¸­æœ‰ä¸‹ä¸€å±‚çº§çš„æ•°ç»„æˆ–å¯¹è±¡ï¼Œåº”å½“æ³¨æ„æ‰©å±•è¿ç®—ç¬¦æ˜¯æµ…æ‹·è´çš„ï¼Œä¹Ÿè®¸ç¬¬ä¸€å±‚é€šè¿‡æ‰©å±•è¿ç®—ç¬¦è¿›è¡Œæ‹·è´å·²ç»æ”¹å˜äº†å¼•ç”¨ï¼Œä½†ä»–ä»¬çš„å­å…ƒç´ ä»ç„¶è¿˜æœ‰åŒæ ·çš„å¼•ç”¨ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// b [{name: 4, val: 1}, {name: 2, val: 2}, {name: 3, val: 3}]")]),t._v("\na "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [{name: 4, val: 1}, {name: 2, val: 2}, {name: 3, val: 3}]")]),t._v("\na "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])])]),s("p",[t._v("å¦‚æœä¸æƒ³è‡ªå·±é€’å½’å»æŸ¥è¯¢å¹¶ä¸”ä¿®æ”¹æŸä¸ªå€¼ï¼Œè¯·ä½¿ç”¨ "),s("strong",[t._v("Immer")]),t._v(" ç¼–å†™æ›´ç®€æ´çš„ä»£ç ã€‚")]),t._v(" "),s("h4",{attrs:{id:"é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€"}},[t._v("#")]),t._v(" é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ useState è®¾ç½®åˆå§‹æ•°æ®æ—¶ï¼Œå°½é‡ä¼ å…¥ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œè€Œä¸æ˜¯åˆå§‹åŒ–å‡½æ•°ç”Ÿæˆæ•°æ®çš„æ‰§è¡Œç»“æœï¼š"),s("code",[t._v("useState(func()) => useState(func)")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"useeffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),s("h3",{attrs:{id:"useeffect-setup-dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-setup-dependencies"}},[t._v("#")]),t._v(" useEffect(setup, dependencies?)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v("ï¼šå¤„ç† Effect çš„å‡½æ•°ã€‚setup å‡½æ•°é€‰æ‹©æ€§è¿”å›ä¸€ä¸ª "),s("strong",[t._v("æ¸…ç†ï¼ˆcleanupï¼‰")]),t._v(" å‡½æ•°ã€‚å½“ç»„ä»¶è¢«æ·»åŠ åˆ° DOM çš„æ—¶å€™ï¼ŒReact å°†è¿è¡Œ setup å‡½æ•°ã€‚åœ¨æ¯æ¬¡ä¾èµ–é¡¹å˜æ›´é‡æ–°æ¸²æŸ“åï¼ŒReact å°†é¦–å…ˆä½¿ç”¨æ—§å€¼è¿è¡Œ cleanup å‡½æ•°ï¼ˆå¦‚æœä½ æä¾›äº†è¯¥å‡½æ•°ï¼‰ï¼Œç„¶åä½¿ç”¨æ–°å€¼è¿è¡Œ setup å‡½æ•°ã€‚åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤åï¼ŒReact å°†æœ€åä¸€æ¬¡è¿è¡Œ cleanup å‡½æ•°ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("å¯é€‰")]),t._v(" "),s("code",[t._v("dependencies")]),t._v("ï¼š"),s("code",[t._v("setup")]),t._v(" ä»£ç ä¸­å¼•ç”¨çš„æ‰€æœ‰å“åº”å¼å€¼çš„åˆ—è¡¨ã€‚å“åº”å¼å€¼åŒ…æ‹¬ propsã€state ä»¥åŠæ‰€æœ‰ç›´æ¥åœ¨ç»„ä»¶å†…éƒ¨å£°æ˜çš„å˜é‡å’Œå‡½æ•°ã€‚å¦‚æœä½ çš„ä»£ç æ£€æŸ¥å·¥å…· "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/editor-setup#linting",target:"_blank",rel:"noopener noreferrer"}},[t._v("é…ç½®äº† React"),s("OutboundLink")],1),t._v("ï¼Œé‚£ä¹ˆå®ƒå°†éªŒè¯æ˜¯å¦æ¯ä¸ªå“åº”å¼å€¼éƒ½è¢«æ­£ç¡®åœ°æŒ‡å®šä¸ºä¸€ä¸ªä¾èµ–é¡¹ã€‚ä¾èµ–é¡¹åˆ—è¡¨çš„å…ƒç´ æ•°é‡å¿…é¡»æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”å¿…é¡»åƒ "),s("code",[t._v("[dep1, dep2, dep3]")]),t._v(" è¿™æ ·å†…è”ç¼–å†™ã€‚React å°†ä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¥æ¯”è¾ƒæ¯ä¸ªä¾èµ–é¡¹å’Œå®ƒå…ˆå‰çš„å€¼ã€‚å¦‚æœçœç•¥æ­¤å‚æ•°ï¼Œåˆ™åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹åï¼Œå°†é‡æ–°è¿è¡Œ Effect å‡½æ•°ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[t._v("useEffect è¿”å› undefinedã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("useEffect")]),t._v(" æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤åªèƒ½åœ¨ "),s("strong",[t._v("ç»„ä»¶çš„é¡¶å±‚")]),t._v(" æˆ–è‡ªå·±çš„ Hook ä¸­è°ƒç”¨å®ƒï¼Œè€Œä¸èƒ½åœ¨å¾ªç¯æˆ–è€…æ¡ä»¶å†…éƒ¨è°ƒç”¨ã€‚å¦‚æœéœ€è¦ï¼ŒæŠ½ç¦»å‡ºä¸€ä¸ªæ–°ç»„ä»¶å¹¶å°† state ç§»å…¥å…¶ä¸­ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½  "),s("strong",[t._v("æ²¡æœ‰æ‰“ç®—ä¸æŸä¸ªå¤–éƒ¨ç³»ç»ŸåŒæ­¥")]),t._v("ï¼Œ"),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/you-might-not-need-an-effect",target:"_blank",rel:"noopener noreferrer"}},[t._v("é‚£ä¹ˆä½ å¯èƒ½ä¸éœ€è¦ Effect"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å½“ä¸¥æ ¼æ¨¡å¼å¯åŠ¨æ—¶ï¼ŒReact å°†åœ¨çœŸæ­£çš„ setup å‡½æ•°é¦–æ¬¡è¿è¡Œå‰ï¼Œ"),s("strong",[t._v("è¿è¡Œä¸€ä¸ªå¼€å‘æ¨¡å¼ä¸‹ä¸“æœ‰çš„é¢å¤– setup + cleanup å‘¨æœŸ")]),t._v("ã€‚è¿™æ˜¯ä¸€ä¸ªå‹åŠ›æµ‹è¯•ï¼Œç”¨äºç¡®ä¿ cleanup é€»è¾‘â€œæ˜ å°„â€åˆ°äº† setup é€»è¾‘ï¼Œå¹¶åœæ­¢æˆ–æ’¤æ¶ˆ setup å‡½æ•°æ­£åœ¨åšçš„ä»»ä½•äº‹æƒ…ã€‚å¦‚æœè¿™ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œ"),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯·å®ç° cleanup å‡½æ•°"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½ çš„ä¸€äº›ä¾èµ–é¡¹æ˜¯ç»„ä»¶å†…éƒ¨å®šä¹‰çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œåˆ™å­˜åœ¨è¿™æ ·çš„é£é™©ï¼Œå³å®ƒä»¬å°† "),s("strong",[t._v("å¯¼è‡´ Effect è¿‡å¤šåœ°é‡æ–°è¿è¡Œ")]),t._v("ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯·åˆ é™¤ä¸å¿…è¦çš„ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useEffect#removing-unnecessary-object-dependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯¹è±¡"),s("OutboundLink")],1),t._v(" å’Œ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useEffect#removing-unnecessary-function-dependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‡½æ•°"),s("OutboundLink")],1),t._v(" ä¾èµ–é¡¹ã€‚ä½ è¿˜å¯ä»¥ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useEffect#updating-state-based-on-previous-state-from-an-effect",target:"_blank",rel:"noopener noreferrer"}},[t._v("æŠ½ç¦»çŠ¶æ€æ›´æ–°"),s("OutboundLink")],1),t._v(" å’Œ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useEffect#reading-the-latest-props-and-state-from-an-effect",target:"_blank",rel:"noopener noreferrer"}},[t._v("éå“åº”å¼çš„é€»è¾‘"),s("OutboundLink")],1),t._v(" åˆ° Effect ä¹‹å¤–ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½ çš„ Effect ä¸æ˜¯ç”±äº¤äº’ï¼ˆæ¯”å¦‚ç‚¹å‡»ï¼‰å¼•èµ·çš„ï¼Œé‚£ä¹ˆ React ä¼šè®©æµè§ˆå™¨ "),s("strong",[t._v("åœ¨è¿è¡Œ Effect å‰å…ˆç»˜åˆ¶å‡ºæ›´æ–°åçš„å±å¹•")]),t._v("ã€‚å¦‚æœä½ çš„ Effect æ­£åœ¨åšä¸€äº›è§†è§‰ç›¸å…³çš„äº‹æƒ…ï¼ˆä¾‹å¦‚ï¼Œå®šä½ä¸€ä¸ª tooltipï¼‰ï¼Œå¹¶ä¸”æœ‰æ˜¾è‘—çš„å»¶è¿Ÿï¼ˆä¾‹å¦‚ï¼Œå®ƒä¼šé—ªçƒï¼‰ï¼Œé‚£ä¹ˆå°† "),s("code",[t._v("useEffect")]),t._v(" æ›¿æ¢ä¸º "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useLayoutEffect",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("useLayoutEffect")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å³ä½¿ä½ çš„ Effect æ˜¯ç”±ä¸€ä¸ªäº¤äº’ï¼ˆæ¯”å¦‚ç‚¹å‡»ï¼‰å¼•èµ·çš„ï¼Œ"),s("strong",[t._v("æµè§ˆå™¨ä¹Ÿå¯èƒ½åœ¨å¤„ç† Effect å†…éƒ¨çš„çŠ¶æ€æ›´æ–°ä¹‹å‰é‡æ–°ç»˜åˆ¶å±å¹•")]),t._v("ã€‚é€šå¸¸ï¼Œè¿™å°±æ˜¯ä½ æƒ³è¦çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸€å®šè¦é˜»æ­¢æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ï¼Œåˆ™éœ€è¦ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useLayoutEffect",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("useLayoutEffect")]),s("OutboundLink")],1),t._v(" æ›¿æ¢ "),s("code",[t._v("useEffect")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("Effect "),s("strong",[t._v("åªåœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œ")]),t._v("ï¼Œåœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ä¸ä¼šè¿è¡Œã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-2"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ"}},[t._v("#")]),t._v(" è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ")]),t._v(" "),s("p",[t._v("useEffect é€‚åˆäºè°ƒç”¨å¤–éƒ¨æ¥å£ã€ä½¿ç”¨å®šæ—¶å™¨ã€ä½¿ç”¨ JS åŸç”Ÿäº‹ä»¶è®¢é˜…ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹åœ°å›¾ç»„ä»¶ç­‰åœºæ™¯ã€‚")]),t._v(" "),s("p",[t._v("ä½ éœ€è¦å‘ "),s("code",[t._v("useEffect")]),t._v(" ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸€ä¸ª setup å‡½æ•°ï¼Œå…¶ setup ä»£ç ç”¨æ¥è¿æ¥åˆ°è¯¥ç³»ç»Ÿã€‚\n"),s("ul",[s("li",[t._v("å®ƒåº”è¯¥è¿”å›ä¸€ä¸ª "),s("strong",[t._v("æ¸…ç†å‡½æ•°")]),t._v("ï¼ˆcleanupï¼‰ï¼Œå…¶ cleanup ä»£ç ç”¨æ¥ä¸è¯¥ç³»ç»Ÿæ–­å¼€è¿æ¥ã€‚")])])]),t._v(" "),s("li",[t._v("ä¸€ä¸ªä¾èµ–é¡¹åˆ—è¡¨ï¼ŒåŒ…æ‹¬è¿™äº›å‡½æ•°ä½¿ç”¨çš„æ¯ä¸ªç»„ä»¶å†…çš„å€¼ã€‚")])]),t._v(" "),s("p",[t._v("React åœ¨å¿…è¦æ—¶ä¼šè°ƒç”¨ setup å’Œ cleanupï¼Œè¿™å¯èƒ½ä¼š"),s("strong",[t._v("å‘ç”Ÿå¤šæ¬¡")]),t._v("ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("å°†ç»„ä»¶æŒ‚è½½åˆ°é¡µé¢æ—¶ï¼Œå°†è¿è¡Œ setup ä»£ç ã€‚")]),t._v(" "),s("li",[t._v("é‡æ–°æ¸²æŸ“ä¾èµ–é¡¹å˜æ›´çš„ç»„ä»¶åï¼š\n"),s("ul",[s("li",[t._v("é¦–å…ˆï¼Œä½¿ç”¨æ—§çš„ props å’Œ state è¿è¡Œ cleanup ä»£ç ã€‚")]),t._v(" "),s("li",[t._v("ç„¶åï¼Œä½¿ç”¨æ–°çš„ props å’Œ state è¿è¡Œ setup ä»£ç ã€‚")])])]),t._v(" "),s("li",[t._v("å½“ç»„ä»¶ä»é¡µé¢å¸è½½åï¼Œcleanup ä»£ç å°†è¿è¡Œæœ€åä¸€æ¬¡ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"åœ¨è‡ªå®šä¹‰-hook-ä¸­å°è£…-effect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨è‡ªå®šä¹‰-hook-ä¸­å°è£…-effect"}},[t._v("#")]),t._v(" åœ¨è‡ªå®šä¹‰ Hook ä¸­å°è£… Effect")]),t._v(" "),s("p",[t._v("Effect æ˜¯ä¸€ç§è„±å›´æœºåˆ¶ï¼šå½“ä½ éœ€è¦â€œèµ°å‡º React ä¹‹å¤–â€æˆ–è€…å½“ä½ çš„ä½¿ç”¨åœºæ™¯æ²¡æœ‰æ›´å¥½çš„å†…ç½®è§£å†³æ–¹æ¡ˆæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœä½ å‘ç°è‡ªå·±ç»å¸¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ Effectï¼Œé‚£ä¹ˆè¿™é€šå¸¸è¡¨æ˜ä½ éœ€è¦ä¸ºç»„ä»¶æ‰€ä¾èµ–çš„é€šç”¨è¡Œä¸ºæå–ä¸€äº› "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/reusing-logic-with-custom-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‡ªå®šä¹‰ Hook"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("è„±å›´æœºåˆ¶ï¼šæœ‰äº›ç»„ä»¶å¯èƒ½éœ€è¦æ§åˆ¶å’ŒåŒæ­¥ React ä¹‹å¤–çš„ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨æµè§ˆå™¨ API èšç„¦è¾“å…¥æ¡†ï¼Œæˆ–è€…åœ¨æ²¡æœ‰ React çš„æƒ…å†µä¸‹å®ç°è§†é¢‘æ’­æ”¾å™¨ï¼Œæˆ–è€…è¿æ¥å¹¶ç›‘å¬è¿œç¨‹æœåŠ¡å™¨çš„æ¶ˆæ¯ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ åˆ°ä¸€äº›è„±å›´æœºåˆ¶ï¼Œè®©ä½ å¯ä»¥â€œèµ°å‡ºâ€ React å¹¶è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿã€‚å¤§å¤šæ•°åº”ç”¨é€»è¾‘å’Œæ•°æ®æµä¸åº”è¯¥ä¾èµ–è¿™äº›åŠŸèƒ½ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"ä½¿ç”¨-effect-è¯·æ±‚æ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-effect-è¯·æ±‚æ•°æ®"}},[t._v("#")]),t._v(" ä½¿ç”¨ Effect è¯·æ±‚æ•°æ®")]),t._v(" "),s("p",[t._v("å‡è®¾æœ‰å¦‚ä¸‹ä»£ç ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fetchBio "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./api.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setPerson"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Alice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setBio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ignore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchBio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ignore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            ignore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),s("p",[t._v("æ³¨æ„ï¼Œ"),s("code",[t._v("ignore")]),t._v(" å˜é‡è¢«åˆå§‹åŒ–ä¸º "),s("code",[t._v("false")]),t._v("ï¼Œå¹¶ä¸”åœ¨ cleanup ä¸­è¢«è®¾ç½®ä¸º "),s("code",[t._v("true")]),t._v("ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ä¸ä¼šå—åˆ°â€œç«äº‰æ¡ä»¶â€çš„å½±å“ï¼šç½‘ç»œå“åº”å¯èƒ½ä¼šä»¥ä¸ä½ å‘é€çš„ä¸åŒçš„é¡ºåºåˆ°è¾¾ã€‚æ¯”å¦‚åœ¨ä¸¤ä¸ª tab é¡µä¸­æ¥å›å¿«é€Ÿåˆ‡æ¢ï¼Œä» 1 åˆ‡åˆ° 2 å†ç§’åˆ‡å› 1ï¼Œåˆ‡åˆ° 2 æ—¶ï¼Œ"),s("code",[t._v("ignore = false")]),t._v("ï¼Œå½“ç§’åˆ‡å› 1 æ—¶ï¼Œ2 ç”±äºè¢«é”€æ¯ï¼Œè§¦å‘äº† cleanupï¼Œæ¥å£è¯·æ±‚åˆ°çš„æ•°æ®å°†ä¼šè¢«é—å¼ƒï¼Œä»è€Œé¿å…äº† 1 é¡µé¢å…ˆæ¸²æŸ“ 2 çš„æ•°æ®ååˆæ¸²æŸ“ 1 çš„æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ Effect ä¸­ä½¿ç”¨ "),s("code",[t._v("fetch")]),t._v(" æ˜¯è¯·æ±‚æ•°æ®çš„ä¸€ç§æµè¡Œæ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å®Œå…¨çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ç§éå¸¸æ‰‹åŠ¨çš„æ–¹æ³•ï¼Œè€Œä¸”æœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Effect ä¸åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ")]),t._v("ã€‚è¿™æ„å‘³ç€åˆå§‹æœåŠ¡å™¨æ¸²æŸ“çš„ HTML å°†åªåŒ…å«æ²¡æœ‰æ•°æ®çš„ loading çŠ¶æ€ã€‚å®¢æˆ·ç«¯ç”µè„‘ä»…ä¸ºäº†å‘ç°å®ƒç°åœ¨éœ€è¦åŠ è½½æ•°æ®ï¼Œå°†ä¸å¾—ä¸ä¸‹è½½æ‰€æœ‰çš„è„šæœ¬æ¥æ¸²æŸ“ä½ çš„åº”ç”¨ç¨‹åºã€‚è¿™å¹¶ä¸é«˜æ•ˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨ Effect ä¸­ç›´æ¥è¯·æ±‚æ•°æ®å¾ˆå®¹æ˜“å¯¼è‡´â€œç½‘ç»œç€‘å¸ƒâ€")]),t._v("ã€‚å½“ä½ æ¸²æŸ“çˆ¶ç»„ä»¶æ—¶ï¼Œå®ƒä¼šè¯·æ±‚ä¸€äº›æ•°æ®ï¼Œå†æ¸²æŸ“å­ç»„ä»¶ï¼Œç„¶åé‡å¤è¿™æ ·çš„è¿‡ç¨‹æ¥è¯·æ±‚å­ç»„ä»¶çš„æ•°æ®ã€‚å¦‚æœç½‘ç»œä¸æ˜¯å¾ˆå¿«ï¼Œè¿™å°†æ¯”å¹¶è¡Œè¯·æ±‚æ‰€æœ‰æ•°æ®è¦æ…¢å¾—å¤šã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨ Effect ä¸­ç›´æ¥è¯·æ±‚æ•°æ®é€šå¸¸æ„å‘³ç€ä½ ä¸ä¼šé¢„åŠ è½½æˆ–ç¼“å­˜æ•°æ®")]),t._v("ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç»„ä»¶å¸è½½åé‡æ–°æŒ‚è½½ï¼Œå®ƒä¸å¾—ä¸å†æ¬¡è¯·æ±‚æ•°æ®ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è¿™ä¸ç¬¦åˆå·¥æ•ˆå­¦")]),t._v("ã€‚åœ¨è°ƒç”¨ "),s("code",[t._v("fetch")]),t._v(" æ—¶ï¼Œéœ€è¦ç¼–å†™å¤§é‡æ ·æ¿ä»£ç ï¼Œä»¥é¿å…åƒ"),s("strong",[t._v("ç«äº‰æ¡ä»¶")]),t._v("è¿™æ ·çš„ bugã€‚")])]),t._v(" "),s("p",[t._v("å¯ä»¥è€ƒè™‘ä½¿ç”¨ Next.js ç­‰æ¡†æ¶çš„å†…ç½®æ•°æ®è·å–æœºåˆ¶ï¼Œæˆ–è€…è‡ªè¡Œæ„å»ºå®¢æˆ·ç«¯ç¼“å­˜ã€‚")]),t._v(" "),s("h4",{attrs:{id:"æŒ‡å®šå“åº”å¼ä¾èµ–é¡¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‡å®šå“åº”å¼ä¾èµ–é¡¹"}},[t._v("#")]),t._v(" æŒ‡å®šå“åº”å¼ä¾èµ–é¡¹")]),t._v(" "),s("p",[t._v("Effect ä»£ç ä¸­ä½¿ç”¨çš„æ¯ä¸ª"),s("strong",[t._v("å“åº”å¼å€¼")]),t._v("éƒ½å¿…é¡»å£°æ˜ä¸ºä¾èµ–é¡¹ï¼Œå“åº”å¼å€¼åŒ…æ‹¬ props å’Œç›´æ¥åœ¨ç»„ä»¶å†…å£°æ˜çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¾èµ–é¡¹ï¼Œå¹¶ä¸”ä¸å¸Œæœ›ç»„ä»¶çš„æ¯æ¬¡å•ç‹¬æ¸²æŸ“ï¼ˆå’Œé‡æ–°æ¸²æŸ“ï¼‰ä¹‹ååå¤æ‰§è¡Œ Effectï¼Œå°†ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºç©ºæ•°ç»„"),s("code",[t._v("[]")]),t._v("ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åœ¨-effect-ä¸­æ ¹æ®å…ˆå‰-state-æ›´æ–°-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-effect-ä¸­æ ¹æ®å…ˆå‰-state-æ›´æ–°-state"}},[t._v("#")]),t._v(" åœ¨ Effect ä¸­æ ¹æ®å…ˆå‰ state æ›´æ–° state")]),t._v(" "),s("p",[t._v("å½“ä½ æƒ³è¦åœ¨ Effect ä¸­æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" intervalId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½ æƒ³è¦æ¯ç§’é€’å¢è¯¥è®¡æ•°å™¨...")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("intervalId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸš© ... ä½†æ˜¯æŒ‡å®š `count` ä½œä¸ºä¾èµ–é¡¹æ€»æ˜¯é‡ç½®é—´éš”å®šæ—¶å™¨ã€‚")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å› ä¸º "),s("code",[t._v("count")]),t._v("  æ˜¯ä¸€ä¸ªå“åº”å¼å€¼ï¼Œæ‰€ä»¥å¿…é¡»åœ¨ä¾èµ–é¡¹åˆ—è¡¨ä¸­æŒ‡å®šå®ƒã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¯¼è‡´ Effect åœ¨æ¯æ¬¡ "),s("code",[t._v("count")]),t._v(" æ›´æ”¹æ—¶å†æ¬¡æ‰§è¡Œ cleanup å’Œ setupã€‚è¿™å¹¶ä¸ç†æƒ³ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†"),s("code",[t._v("c => c + 1")]),t._v("çŠ¶æ€æ›´æ–°å™¨ä¼ é€’ç»™ setCountï¼Œç°åœ¨ Effect ä¸å†éœ€è¦ä¾èµ– countï¼Œæ¯æ¬¡ "),s("code",[t._v("count")]),t._v(" æ›´æ”¹æ—¶ï¼Œå®ƒéƒ½ä¸éœ€è¦æ¸…ç†ï¼ˆcleanupï¼‰å’Œè®¾ç½®ï¼ˆsetupï¼‰é—´éš”å®šæ—¶å™¨ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹"}},[t._v("#")]),t._v(" åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹")]),t._v(" "),s("p",[t._v("å¦‚æœ Effect çš„æ¯æ¬¡æ›´æ–°ä¾èµ–äºä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°åˆ›å»ºäºæ¸²æŸ“æœŸé—´ï¼Œé‚£ Effect å¯èƒ½ä¼šé¢‘ç¹æ‰§è¡Œï¼Œå› ä¸ºæ¯æ¬¡ç»„ä»¶æ›´æ–°æ‰§è¡Œæ¸²æŸ“ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–è€…å‡½æ•°ã€‚è¯·é¿å…ä½¿ç”¨æ¸²æŸ“æœŸé—´åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºä¾èµ–é¡¹ã€‚ç›¸åï¼Œåœ¨ Effect å†…éƒ¨åˆ›å»ºå¯¹è±¡ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" serverUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://localhost:1234'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ChatRoom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" roomId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¿å…ä½¿ç”¨æ¸²æŸ“æœŸé—´åˆ›å»ºçš„å¯¹è±¡")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const options = {")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     serverUrl: serverUrl,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     roomId: roomId")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// };")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç°åœ¨åªæœ‰åœ¨ roomId å˜åŒ–åï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ Effect å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \tserverUrl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" serverUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \troomId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" roomId\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" connection "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("roomId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),s("h4",{attrs:{id:"ä»-effect-è¯»å–æœ€æ–°çš„-props-å’Œ-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»-effect-è¯»å–æœ€æ–°çš„-props-å’Œ-state"}},[t._v("#")]),t._v(" ä» Effect è¯»å–æœ€æ–°çš„ props å’Œ state")]),t._v(" "),s("p",[t._v("æ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨ Effect ä¸­è¯»å–å“åº”å¼å€¼æ—¶ï¼Œå¿…é¡»å°†å…¶æ·»åŠ ä¸ºä¾èµ–é¡¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ä½ çš„ Effect å¯¹è¯¥å€¼çš„æ¯æ¬¡æ›´æ”¹éƒ½â€œä½œå‡ºå“åº”â€ã€‚ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œåªæ˜¯æƒ³è·å–æœ€æ–°çš„ props å’Œ state è€Œä¸è§¦å‘å“åº”ã€‚")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" shoppingCart "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onVisit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffectEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("visitedUrl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logVisit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("visitedUrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" shoppingCart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onVisit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… æ‰€æœ‰å£°æ˜çš„ä¾èµ–é¡¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("é€šè¿‡åœ¨ "),s("code",[t._v("onVisit")]),t._v(" ä¸­è¯»å– "),s("code",[t._v("shoppingCart")]),t._v("ï¼Œç¡®ä¿äº† "),s("code",[t._v("shoppingCart")]),t._v(" ä¸ä¼šä½¿ Effect é‡æ–°è¿è¡Œã€‚")]),t._v(" "),s("h2",{attrs:{id:"uselayouteffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect"}},[t._v("#")]),t._v(" useLayoutEffect")]),t._v(" "),s("p",[t._v("å¦‚æœ Effect ä¸€å®šè¦é˜»æ­¢æµè§ˆå™¨ç»˜åˆ¶å±å¹•ï¼Œä½¿ç”¨ useLayoutEffect æ›¿æ¢ useEffectã€‚useLayoutEffect æ˜¯ useEffect çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåœ¨æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ä¹‹å‰è§¦å‘ã€‚")]),t._v(" "),s("p",[t._v("æ¯”å¦‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå…ƒç´ çš„æ¸²æŸ“éœ€è¦ä¾æ®å½“å‰çš„ dom ä½ç½®æ¥è¿›è¡Œè®¡ç®—ï¼Œä½¿ç”¨ useEffectï¼ŒEffect å‡½æ•°ä¼šåœ¨æ“ä½œ dom ä¹‹åå¼‚æ­¥æ‰§è¡Œï¼Œæ‰€ä»¥å¯èƒ½çœ‹åˆ°é—ªçƒï¼ˆç»„ä»¶çš„ä¸¤æ¬¡æ¸²æŸ“ä½ç½®ä¸åŒï¼‰ã€‚ä½¿ç”¨ useLayoutEffect åˆ™æ˜¯åœ¨åŒä¸€ä¸ª JS æ‰§è¡Œç‰‡æ®µä¸­åŒæ­¥æ‰§è¡Œ Effect å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯é˜»å¡æ¸²æŸ“ï¼Œå¹¶åœ¨è®¡ç®—ä¹‹åæ‰§è¡Œæ¸²æŸ“ï¼Œçœ‹ä¸Šå»çš„æ•ˆæœå°±å¥½åƒé¡µé¢åªæ¸²æŸ“äº†ä¸€æ¬¡ï¼Œä»è€Œé¿å…é—ªçƒã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯å¦‚æœ Effect çš„æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå°†å¯èƒ½å¯¼è‡´æ¸²æŸ“è¢«é˜»å¡å¤ªä¹…ï¼Œå°½é‡é¿å…è¿™ç§æƒ…å†µã€‚")]),t._v(" "),s("h2",{attrs:{id:"usereducer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usereducer"}},[t._v("#")]),t._v(" useReducer")]),t._v(" "),s("h3",{attrs:{id:"usereducer-reducer-initialarg-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usereducer-reducer-initialarg-init"}},[t._v("#")]),t._v(" useReducer(reducer, initialArg, init?)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("reducer")]),t._v("ï¼šç”¨äºæ›´æ–° state çš„çº¯å‡½æ•°ã€‚å‚æ•°ä¸º state å’Œ actionï¼Œè¿”å›å€¼æ˜¯æ›´æ–°åçš„ stateã€‚state ä¸ action å¯ä»¥æ˜¯ä»»æ„åˆæ³•å€¼ã€‚")]),t._v(" "),s("li",[s("code",[t._v("initialArg")]),t._v("ï¼šç”¨äºåˆå§‹åŒ– state çš„ä»»æ„å€¼ã€‚åˆå§‹å€¼çš„è®¡ç®—é€»è¾‘å–å†³äºæ¥ä¸‹æ¥çš„ "),s("code",[t._v("init")]),t._v(" å‚æ•°ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯é€‰å‚æ•°")]),t._v(" "),s("code",[t._v("init")]),t._v("ï¼šç”¨äºè®¡ç®—åˆå§‹å€¼çš„å‡½æ•°ã€‚å¦‚æœå­˜åœ¨ï¼Œä½¿ç”¨ "),s("code",[t._v("init(initialArg)")]),t._v(" çš„æ‰§è¡Œç»“æœä½œä¸ºåˆå§‹å€¼ï¼Œå¦åˆ™ä½¿ç”¨ "),s("code",[t._v("initialArg")]),t._v("ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("ol",[s("li",[t._v("å½“å‰çš„ stateã€‚åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒæ˜¯ "),s("code",[t._v("init(initialArg)")]),t._v(" æˆ– "),s("code",[t._v("initialArg")]),t._v(" ï¼ˆå¦‚æœæ²¡æœ‰ "),s("code",[t._v("init")]),t._v(" å‡½æ•°ï¼‰ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useReducer#dispatch",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("dispatch")]),t._v(" å‡½æ•°"),s("OutboundLink")],1),t._v("ã€‚ç”¨äºæ›´æ–° state å¹¶è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"dispatch-å‡½æ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dispatch-å‡½æ•°"}},[t._v("#")]),t._v(" "),s("code",[t._v("dispatch")]),t._v(" å‡½æ•°")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("action")]),t._v("ï¼šç”¨æˆ·æ‰§è¡Œçš„æ“ä½œã€‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ã€‚é€šå¸¸æ¥è¯´ action æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ "),s("code",[t._v("type")]),t._v(" å±æ€§æ ‡è¯†ç±»å‹ï¼Œå…¶å®ƒå±æ€§æºå¸¦é¢å¤–ä¿¡æ¯ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[t._v("dispatch å‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("useReducer")]),t._v(" æ˜¯ä¸€ä¸ª Hookï¼Œæ‰€ä»¥åªèƒ½åœ¨ "),s("strong",[t._v("ç»„ä»¶çš„é¡¶å±‚ä½œç”¨åŸŸ")]),t._v(" æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨ï¼Œè€Œä¸èƒ½åœ¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ã€‚å¦‚æœä½ æœ‰è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå¹¶æŠŠ state ç§»å…¥å…¶ä¸­ã€‚")]),t._v(" "),s("li",[t._v("ä¸¥æ ¼æ¨¡å¼ä¸‹ React ä¼š "),s("strong",[t._v("è°ƒç”¨ä¸¤æ¬¡ reducer å’Œåˆå§‹åŒ–å‡½æ•°")]),t._v("ï¼Œè¿™å¯ä»¥ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useReducer#my-reducer-or-initializer-function-runs-twice",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¸®åŠ©ä½ å‘ç°æ„å¤–çš„å‰¯ä½œç”¨"),s("OutboundLink")],1),t._v("ã€‚è¿™åªæ˜¯å¼€å‘æ¨¡å¼ä¸‹çš„è¡Œä¸ºï¼Œå¹¶ä¸ä¼šå½±å“ç”Ÿäº§ç¯å¢ƒã€‚åªè¦ reducer å’Œåˆå§‹åŒ–å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆç†åº”å¦‚æ­¤ï¼‰å°±ä¸ä¼šæ”¹å˜ä½ çš„é€»è¾‘ã€‚å…¶ä¸­ä¸€ä¸ªè°ƒç”¨ç»“æœä¼šè¢«å¿½ç•¥ã€‚")]),t._v(" "),s("li",[s("code",[t._v("dispatch")]),t._v(" å‡½æ•° "),s("strong",[t._v("æ˜¯ä¸ºä¸‹ä¸€æ¬¡æ¸²æŸ“è€Œæ›´æ–° state")]),t._v("ã€‚å› æ­¤åœ¨è°ƒç”¨ "),s("code",[t._v("dispatch")]),t._v(" å‡½æ•°åè¯»å– state "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useReducer#ive-dispatched-an-action-but-logging-gives-me-the-old-state-value",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¹¶ä¸ä¼šæ‹¿åˆ°æ›´æ–°åçš„å€¼"),s("OutboundLink")],1),t._v("ï¼Œä¹Ÿå°±æ˜¯è¯´åªèƒ½è·å–åˆ°è°ƒç”¨å‰çš„å€¼ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½ æä¾›çš„æ–°å€¼ä¸å½“å‰çš„ "),s("code",[t._v("state")]),t._v(" ç›¸åŒï¼ˆä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¯”è¾ƒï¼‰ï¼ŒReact ä¼š "),s("strong",[t._v("è·³è¿‡ç»„ä»¶å’Œå­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“")]),t._v("ï¼Œè¿™æ˜¯ä¸€ç§ä¼˜åŒ–æ‰‹æ®µã€‚è™½ç„¶åœ¨è·³è¿‡é‡æ–°æ¸²æŸ“å‰ React å¯èƒ½ä¼šè°ƒç”¨ä½ çš„ç»„ä»¶ï¼Œä½†æ˜¯è¿™ä¸åº”è¯¥å½±å“ä½ çš„ä»£ç ã€‚")]),t._v(" "),s("li",[t._v("React "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/queueing-a-series-of-state-updates",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¼šæ‰¹é‡æ›´æ–° state"),s("OutboundLink")],1),t._v("ã€‚state ä¼šåœ¨ "),s("strong",[t._v("æ‰€æœ‰äº‹ä»¶å‡½æ•°æ‰§è¡Œå®Œæ¯•")]),t._v(" å¹¶ä¸”å·²ç»è°ƒç”¨è¿‡å®ƒçš„ "),s("code",[t._v("set")]),t._v(" å‡½æ•°åè¿›è¡Œæ›´æ–°ï¼Œè¿™å¯ä»¥é˜²æ­¢åœ¨ä¸€ä¸ªäº‹ä»¶ä¸­å¤šæ¬¡è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚å¦‚æœåœ¨è®¿é—® DOM ç­‰æå°‘æ•°æƒ…å†µä¸‹éœ€è¦å¼ºåˆ¶ React æå‰æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react-dom/flushSync",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("flushSync")]),s("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-3"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"å‘ç»„ä»¶æ·»åŠ -reducer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘ç»„ä»¶æ·»åŠ -reducer"}},[t._v("#")]),t._v(" å‘ç»„ä»¶æ·»åŠ  reducer")]),t._v(" "),s("p",[t._v("åœ¨ç»„ä»¶çš„é¡¶å±‚ä½œç”¨åŸŸè°ƒç”¨ "),s("code",[t._v("useReducer")]),t._v(" æ¥åˆ›å»ºä¸€ä¸ªç”¨äºç®¡ç†çŠ¶æ€ï¼ˆstateï¼‰çš„ "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/extracting-state-logic-into-a-reducer",target:"_blank",rel:"noopener noreferrer"}},[t._v("reducer"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useReducer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'incremented_age'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unknown action.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'incremented_age'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                Increment age\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" You are "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("useReducer")]),t._v(" å’Œ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("useState")]),s("OutboundLink")],1),t._v(" éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®©ä½ æŠŠçŠ¶æ€æ›´æ–°é€»è¾‘ä»äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ç§»åŠ¨åˆ°ç»„ä»¶å¤–éƒ¨ã€‚")]),t._v(" "),s("h2",{attrs:{id:"useref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),s("h3",{attrs:{id:"useref-initialvalue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref-initialvalue"}},[t._v("#")]),t._v(" useRef(initialValue)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("initialValue")]),t._v("ï¼šref å¯¹è±¡çš„ "),s("code",[t._v("current")]),t._v(" å±æ€§çš„åˆå§‹å€¼ã€‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ã€‚è¿™ä¸ªå‚æ•°åœ¨é¦–æ¬¡æ¸²æŸ“åè¢«å¿½ç•¥ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[s("code",[t._v("useRef")]),t._v(" è¿”å›ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå±æ€§çš„å¯¹è±¡:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("current")]),t._v("ï¼šåˆå§‹å€¼ä¸ºä¼ é€’çš„ "),s("code",[t._v("initialValue")]),t._v("ã€‚ä¹‹åå¯ä»¥å°†å…¶è®¾ç½®ä¸ºå…¶ä»–å€¼ã€‚å¦‚æœå°† ref å¯¹è±¡ä½œä¸ºä¸€ä¸ª JSX èŠ‚ç‚¹çš„ "),s("code",[t._v("ref")]),t._v(" å±æ€§ä¼ é€’ç»™ Reactï¼ŒReact å°†ä¸ºå®ƒè®¾ç½® "),s("code",[t._v("current")]),t._v(" å±æ€§ã€‚")])]),t._v(" "),s("p",[t._v("åœ¨åç»­çš„æ¸²æŸ“ä¸­ï¼Œ"),s("code",[t._v("useRef")]),t._v(" å°†è¿”å›åŒä¸€ä¸ªå¯¹è±¡ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[t._v("å¯ä»¥ä¿®æ”¹ "),s("code",[t._v("ref.current")]),t._v(" å±æ€§ã€‚ä¸ state ä¸åŒï¼Œå®ƒæ˜¯å¯å˜çš„ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒæŒæœ‰ä¸€ä¸ªç”¨äºæ¸²æŸ“çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ state çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("æ”¹å˜ "),s("code",[t._v("ref.current")]),t._v(" å±æ€§æ—¶ï¼ŒReact ä¸ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚React ä¸çŸ¥é“å®ƒä½•æ—¶ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå› ä¸º ref æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("é™¤äº† "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useRef#avoiding-recreating-the-ref-contents",target:"_blank",rel:"noopener noreferrer"}},[t._v("åˆå§‹åŒ–"),s("OutboundLink")],1),t._v(" å¤–ä¸è¦åœ¨æ¸²æŸ“æœŸé—´å†™å…¥æˆ–è€…è¯»å– "),s("code",[t._v("ref.current")]),t._v("ï¼Œå¦åˆ™ä¼šä½¿ç»„ä»¶è¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹ã€‚")]),t._v(" "),s("li",[t._v("åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒReact å°†ä¼š "),s("strong",[t._v("è°ƒç”¨ä¸¤æ¬¡ç»„ä»¶æ–¹æ³•")]),t._v("ï¼Œè¿™æ˜¯ä¸ºäº† "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#my-initializer-or-updater-function-runs-twice",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¸®åŠ©å‘ç°æ„å¤–é—®é¢˜"),s("OutboundLink")],1),t._v("ã€‚ä½†è¿™åªæ˜¯å¼€å‘æ¨¡å¼ä¸‹çš„è¡Œä¸ºï¼Œä¸ä¼šå½±å“ç”Ÿäº§æ¨¡å¼ã€‚æ¯ä¸ª ref å¯¹è±¡éƒ½å°†ä¼šåˆ›å»ºä¸¤æ¬¡ï¼Œä½†æ˜¯å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬å°†è¢«ä¸¢å¼ƒã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ç»„ä»¶çº¯å‡½æ•°ï¼ˆä¹Ÿåº”å½“å¦‚æ­¤ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ä¼šå½±å“å…¶è¡Œä¸ºã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-4"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"ä½¿ç”¨-ref-å¼•ç”¨ä¸€ä¸ªå€¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-ref-å¼•ç”¨ä¸€ä¸ªå€¼"}},[t._v("#")]),t._v(" ä½¿ç”¨ ref å¼•ç”¨ä¸€ä¸ªå€¼")]),t._v(" "),s("p",[t._v("useRef è¿”å›ä¸€ä¸ªå…·æœ‰å•ä¸ª current å±æ€§çš„ ref å¯¹è±¡ï¼Œåœ¨åç»­çš„æ¸²æŸ“ä¸­ï¼ŒuseRef å°†è¿”å›ç›¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜ current å±æ€§æ¥å­˜å‚¨ä¿¡æ¯ï¼Œå¹¶åœ¨ä¹‹åè¯»å–ã€‚"),s("strong",[t._v("æ”¹å˜ ref ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“")]),t._v("ï¼Œè¿™æ„å‘³ç€ ref æ˜¯å­˜å‚¨ä¸€äº›ä¸å½±å“ç»„ä»¶è§†å›¾è¾“å‡ºä¿¡æ¯çš„å®Œç¾é€‰æ‹©ã€‚")]),t._v(" "),s("h4",{attrs:{id:"é€šè¿‡-ref-æ“ä½œ-dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-ref-æ“ä½œ-dom"}},[t._v("#")]),t._v(" é€šè¿‡ ref æ“ä½œ DOM")]),t._v(" "),s("p",[t._v("å½“ React åˆ›å»º DOM èŠ‚ç‚¹å¹¶å°†å…¶æ¸²æŸ“åˆ°å±å¹•æ—¶ï¼ŒReact å°†ä¼šæŠŠ DOM èŠ‚ç‚¹è®¾ç½®ä¸º ref å¯¹è±¡çš„"),s("code",[t._v("current")]),t._v("å±æ€§ã€‚ç°åœ¨å¯ä»¥å€ŸåŠ© ref å¯¹è±¡è®¿é—®"),s("code",[t._v("<input>")]),t._v("çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ç±»ä¼¼äº"),s("code",[t._v("focus()")]),t._v("çš„æ–¹æ³•ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRef "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inputRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                èšç„¦è¾“å…¥æ¡†\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"é€šè¿‡-forwardref-å°†-ref-ä¼ é€’ç»™çˆ¶ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-forwardref-å°†-ref-ä¼ é€’ç»™çˆ¶ç»„ä»¶"}},[t._v("#")]),t._v(" é€šè¿‡ forwardRef å°† ref ä¼ é€’ç»™çˆ¶ç»„ä»¶")]),t._v(" "),s("p",[t._v("åŸç”Ÿçš„æ ‡ç­¾å¯ä»¥æ‹¿åˆ°å®ƒçš„ refï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œå¹¶æ²¡æœ‰æš´éœ²å®ƒä»¬å†…éƒ¨ DOM èŠ‚ç‚¹çš„ refï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" forwardRef "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyInput "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forwardRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onChange "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input\n            value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            onChange"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onChange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" MyInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("çˆ¶ç»„ä»¶ä¸­ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("form"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyInput label"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Enter your name:"')]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),t._v(" onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                ç¼–è¾‘\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("form"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"useimperativehandle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle"}},[t._v("#")]),t._v(" useImperativeHandle")]),t._v(" "),s("h3",{attrs:{id:"useimperativehandle-ref-createhandle-dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle-ref-createhandle-dependencies"}},[t._v("#")]),t._v(" useImperativeHandle(ref, createHandle, dependencies?)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ref")]),t._v("ï¼šè¯¥ "),s("code",[t._v("ref")]),t._v(" æ˜¯ä½ ä» "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/forwardRef#render-function",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("forwardRef")]),t._v(" æ¸²æŸ“å‡½æ•°"),s("OutboundLink")],1),t._v(" ä¸­è·å¾—çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚")]),t._v(" "),s("li",[s("code",[t._v("createHandle")]),t._v("ï¼šè¯¥å‡½æ•°æ— éœ€å‚æ•°ï¼Œå®ƒè¿”å›ä½ æƒ³è¦æš´éœ²çš„ ref çš„å¥æŸ„ã€‚è¯¥å¥æŸ„å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹ã€‚é€šå¸¸ï¼Œä½ ä¼šè¿”å›ä¸€ä¸ªåŒ…å«ä½ æƒ³æš´éœ²çš„æ–¹æ³•çš„å¯¹è±¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯é€‰çš„")]),t._v(" "),s("code",[t._v("dependencies")]),t._v("ï¼šå‡½æ•° "),s("code",[t._v("createHandle")]),t._v(" ä»£ç ä¸­æ‰€ç”¨åˆ°çš„æ‰€æœ‰å“åº”å¼çš„å€¼çš„åˆ—è¡¨ã€‚å“åº”å¼çš„å€¼åŒ…å« propsã€çŠ¶æ€å’Œå…¶ä»–æ‰€æœ‰ç›´æ¥åœ¨ä½ ç»„ä»¶ä½“å†…å£°æ˜çš„å˜é‡å’Œå‡½æ•°ã€‚å€˜è‹¥ä½ çš„ä»£ç æ£€æŸ¥å™¨å·² "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/editor-setup#linting",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸º React é…ç½®å¥½"),s("OutboundLink")],1),t._v("ï¼Œå®ƒä¼šéªŒè¯æ¯ä¸€ä¸ªå“åº”å¼çš„å€¼æ˜¯å¦è¢«æ­£ç¡®æŒ‡å®šä¸ºä¾èµ–é¡¹ã€‚è¯¥åˆ—è¡¨çš„é•¿åº¦å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸æ•°é¡¹ï¼Œå¹¶ä¸”å¿…é¡»æŒ‰ç…§ "),s("code",[t._v("[dep1, dep2, dep3]")]),t._v(" çš„å½¢å¼ç½—åˆ—å„ä¾èµ–é¡¹ã€‚React ä¼šä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¥æ¯”è¾ƒæ¯ä¸€ä¸ªä¾èµ–é¡¹ä¸å…¶å¯¹åº”çš„ä¹‹å‰å€¼ã€‚å¦‚æœä¸€æ¬¡é‡æ–°æ¸²æŸ“å¯¼è‡´æŸäº›ä¾èµ–é¡¹å‘ç”Ÿäº†æ”¹å˜ï¼Œæˆ–ä½ æ²¡æœ‰æä¾›è¿™ä¸ªå‚æ•°åˆ—è¡¨ï¼Œä½ çš„å‡½æ•° "),s("code",[t._v("createHandle")]),t._v(" å°†ä¼šè¢«é‡æ–°æ‰§è¡Œï¼Œè€Œæ–°ç”Ÿæˆçš„å¥æŸ„åˆ™ä¼šè¢«åˆ†é…ç»™ refã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›å€¼")])]),t._v(" "),s("p",[t._v("useImperativeHandle è¿”å› undefinedã€‚")]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-5"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"å‘çˆ¶ç»„ä»¶æš´éœ²ä¸€ä¸ªè‡ªå®šä¹‰çš„-ref-å¥æŸ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘çˆ¶ç»„ä»¶æš´éœ²ä¸€ä¸ªè‡ªå®šä¹‰çš„-ref-å¥æŸ„"}},[t._v("#")]),t._v(" å‘çˆ¶ç»„ä»¶æš´éœ²ä¸€ä¸ªè‡ªå®šä¹‰çš„ ref å¥æŸ„")]),t._v(" "),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸ä¼šå°†å®ƒä»¬çš„ DOM èŠ‚ç‚¹æš´éœ²ç»™çˆ¶ç»„ä»¶ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæƒ³è¦ "),s("code",[t._v("MyInput")]),t._v(" çš„çˆ¶ç»„ä»¶ "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs",target:"_blank",rel:"noopener noreferrer"}},[t._v("èƒ½è®¿é—®åˆ°"),s("OutboundLink")],1),t._v(" "),s("code",[t._v("<input>")]),t._v(" DOM èŠ‚ç‚¹ï¼Œå¿…é¡»é€‰æ‹©ä½¿ç”¨"),s("code",[t._v("forwardRef")]),t._v("ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸æ˜¯æƒ³æš´éœ²åŸç”Ÿæ ‡ç­¾ï¼Œè€Œæ˜¯æš´éœ²ä¸€äº›è‡ªå®šä¹‰å†…å®¹ï¼Œæ¯”å¦‚å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" forwardRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useImperativeHandle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyInput "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forwardRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inputRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useImperativeHandle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inputRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"usecontext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecontext"}},[t._v("#")]),t._v(" useContext")]),t._v(" "),s("h3",{attrs:{id:"usecontext-somecontext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecontext-somecontext"}},[t._v("#")]),t._v(" useContext(SomeContext)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("SomeContext")]),t._v("ï¼šå…ˆå‰ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/createContext",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("createContext")]),s("OutboundLink")],1),t._v(" åˆ›å»ºçš„ contextã€‚context æœ¬èº«ä¸åŒ…å«ä¿¡æ¯ï¼Œå®ƒåªä»£è¡¨ä½ å¯ä»¥æä¾›æˆ–ä»ç»„ä»¶ä¸­è¯»å–çš„ä¿¡æ¯ç±»å‹ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[s("code",[t._v("useContext")]),t._v(" ä¸ºè°ƒç”¨ç»„ä»¶è¿”å› context çš„å€¼ã€‚å®ƒè¢«ç¡®å®šä¸ºä¼ é€’ç»™æ ‘ä¸­è°ƒç”¨ç»„ä»¶ä¸Šæ–¹æœ€è¿‘çš„ "),s("code",[t._v("SomeContext.Provider")]),t._v(" çš„ "),s("code",[t._v("value")]),t._v("ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„ providerï¼Œé‚£ä¹ˆè¿”å›å€¼å°†ä¼šæ˜¯ä¸ºåˆ›å»ºè¯¥ context ä¼ é€’ç»™ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/createContext",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("createContext")]),s("OutboundLink")],1),t._v(" çš„ "),s("code",[t._v("defaultValue")]),t._v("ã€‚è¿”å›çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ã€‚å¦‚æœ context å‘ç”Ÿå˜åŒ–ï¼ŒReact ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“è¯»å– context çš„ç»„ä»¶ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[t._v("ç»„ä»¶ä¸­çš„ "),s("code",[t._v("useContext()")]),t._v(" è°ƒç”¨ä¸å— "),s("strong",[t._v("åŒä¸€")]),t._v(" ç»„ä»¶è¿”å›çš„ provider çš„å½±å“ã€‚ç›¸åº”çš„ "),s("code",[t._v("<Context.Provider>")]),t._v(" éœ€è¦ä½äºè°ƒç”¨ "),s("code",[t._v("useContext()")]),t._v(" çš„ç»„ä»¶ "),s("strong",[t._v("ä¹‹ä¸Š")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("ä» provider æ¥æ”¶åˆ°ä¸åŒçš„ "),s("code",[t._v("value")]),t._v(" å¼€å§‹ï¼ŒReact è‡ªåŠ¨é‡æ–°æ¸²æŸ“ä½¿ç”¨äº†è¯¥ç‰¹å®š context çš„æ‰€æœ‰å­çº§ã€‚å…ˆå‰çš„å€¼å’Œæ–°çš„å€¼ä¼šä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¥åšæ¯”è¾ƒã€‚ä½¿ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/memo",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("memo")]),s("OutboundLink")],1),t._v(" æ¥è·³è¿‡é‡æ–°æ¸²æŸ“å¹¶ä¸å¦¨ç¢å­çº§æ¥æ”¶åˆ°æ–°çš„ context å€¼ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœæ‚¨çš„æ„å»ºç³»ç»Ÿåœ¨è¾“å‡ºä¸­äº§ç”Ÿé‡å¤çš„æ¨¡å—ï¼ˆå¯èƒ½å‘ç”Ÿåœ¨ç¬¦å·é“¾æ¥ä¸­ï¼‰ï¼Œè¿™å¯èƒ½ä¼šç ´å contextã€‚é€šè¿‡ context ä¼ é€’æ•°æ®åªæœ‰åœ¨ç”¨äºä¼ é€’ context çš„ "),s("code",[t._v("SomeContext")]),t._v(" å’Œç”¨äºè¯»å–æ•°æ®çš„ "),s("code",[t._v("SomeContext")]),t._v(" æ˜¯å®Œå…¨ç›¸åŒçš„å¯¹è±¡æ—¶æ‰æœ‰æ•ˆï¼Œè¿™æ˜¯ç”± "),s("code",[t._v("===")]),t._v(" æ¯”è¾ƒå†³å®šçš„ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-6"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"å‘ç»„ä»¶æ ‘æ·±å±‚ä¼ é€’æ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘ç»„ä»¶æ ‘æ·±å±‚ä¼ é€’æ•°æ®"}},[t._v("#")]),t._v(" å‘ç»„ä»¶æ ‘æ·±å±‚ä¼ é€’æ•°æ®")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useContext "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ThemeContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ThemeContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dark"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Form "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ThemeContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Panel title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Welcome"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Sign up"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Log "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Panel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Panel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" theme "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThemeContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" className "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'panel-'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" theme"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("section className"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("className"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("section"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" children "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" theme "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThemeContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" className "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button-'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" theme"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button className"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("className"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æœæœ‰å¤šå±‚åµŒå¥—çš„ Providerï¼Œå†…å±‚ç»„ä»¶å°†è·å–ç¦»å®ƒæœ€è¿‘çš„ä¸€å±‚ Provider æ‰€æä¾›çš„å€¼ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åœ¨ä¼ é€’å¯¹è±¡å’Œå‡½æ•°æ—¶ä¼˜åŒ–é‡æ–°æ¸²æŸ“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨ä¼ é€’å¯¹è±¡å’Œå‡½æ•°æ—¶ä¼˜åŒ–é‡æ–°æ¸²æŸ“"}},[t._v("#")]),t._v(" åœ¨ä¼ é€’å¯¹è±¡å’Œå‡½æ•°æ—¶ä¼˜åŒ–é‡æ–°æ¸²æŸ“")]),t._v(" "),s("p",[t._v("å¦‚æœå®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡ context ä¼ é€’ç»™ä¸‹å±‚ï¼Œå½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact è¿˜å¿…é¡»é‡æ–°æ¸²æŸ“å†…å±‚è°ƒç”¨è¯¥ context çš„æ‰€æœ‰ç»„ä»¶ã€‚å¯ä»¥ä½¿ç”¨ useCallback åŒ…è£¹å‡½æ•°ï¼Œä½¿ç”¨ useMemo åŒ…è£¹å¯¹è±¡ï¼Œè¿™æ ·åªæœ‰å½“å®ƒä»¬çš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),s("h2",{attrs:{id:"usememo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),s("h3",{attrs:{id:"usememo-calculatevalue-dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usememo-calculatevalue-dependencies"}},[t._v("#")]),t._v(" useMemo(calculateValue, dependencies)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("calculateValue")]),t._v("ï¼šè¦ç¼“å­˜è®¡ç®—å€¼çš„å‡½æ•°ã€‚å®ƒåº”è¯¥æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°çš„çº¯å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥è¿”å›ä»»æ„ç±»å‹ã€‚React å°†ä¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼›åœ¨ä¹‹åçš„æ¸²æŸ“ä¸­ï¼Œå¦‚æœ "),s("code",[t._v("dependencies")]),t._v(" æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒReact å°†ç›´æ¥è¿”å›ç›¸åŒå€¼ã€‚å¦åˆ™ï¼Œå°†ä¼šå†æ¬¡è°ƒç”¨ "),s("code",[t._v("calculateValue")]),t._v(" å¹¶è¿”å›æœ€æ–°ç»“æœï¼Œç„¶åç¼“å­˜è¯¥ç»“æœä»¥ä¾¿ä¸‹æ¬¡é‡å¤ä½¿ç”¨ã€‚")]),t._v(" "),s("li",[s("code",[t._v("dependencies")]),t._v("ï¼šæ‰€æœ‰åœ¨ "),s("code",[t._v("calculateValue")]),t._v(" å‡½æ•°ä¸­ä½¿ç”¨çš„å“åº”å¼å˜é‡ç»„æˆçš„æ•°ç»„ã€‚å“åº”å¼å˜é‡åŒ…æ‹¬ propsã€state å’Œæ‰€æœ‰ä½ ç›´æ¥åœ¨ç»„ä»¶ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ã€‚å¦‚æœä½ åœ¨ä»£ç æ£€æŸ¥å·¥å…·ä¸­ "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/editor-setup#linting",target:"_blank",rel:"noopener noreferrer"}},[t._v("é…ç½®äº† React"),s("OutboundLink")],1),t._v("ï¼Œå®ƒå°†ä¼šç¡®ä¿æ¯ä¸€ä¸ªå“åº”å¼æ•°æ®éƒ½è¢«æ­£ç¡®åœ°å®šä¹‰ä¸ºä¾èµ–é¡¹ã€‚ä¾èµ–é¡¹æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯å›ºå®šçš„å¹¶ä¸”å¿…é¡»å†™æˆ "),s("code",[t._v("[dep1, dep2, dep3]")]),t._v(" è¿™ç§å½¢å¼ã€‚React ä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" å°†æ¯ä¸ªä¾èµ–é¡¹ä¸å…¶ä¹‹å‰çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[t._v("åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œ"),s("code",[t._v("useMemo")]),t._v(" è¿”å›ä¸å¸¦å‚æ•°è°ƒç”¨ "),s("code",[t._v("calculateValue")]),t._v(" çš„ç»“æœã€‚")]),t._v(" "),s("p",[t._v("åœ¨æ¥ä¸‹æ¥çš„æ¸²æŸ“ä¸­ï¼Œå¦‚æœä¾èµ–é¡¹æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå®ƒå°†è¿”å›ä¸Šæ¬¡ç¼“å­˜çš„å€¼ï¼›å¦åˆ™å°†å†æ¬¡è°ƒç”¨ "),s("code",[t._v("calculateValue")]),t._v("ï¼Œå¹¶è¿”å›æœ€æ–°ç»“æœã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("useMemo")]),t._v(" æ˜¯ä¸€ä¸ª React Hookï¼Œæ‰€ä»¥ä½ åªèƒ½ "),s("strong",[t._v("åœ¨ç»„ä»¶çš„é¡¶å±‚")]),t._v(" æˆ–è€…è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å®ƒã€‚ä½ ä¸èƒ½åœ¨å¾ªç¯è¯­å¥æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœ‰éœ€è¦ï¼Œå°†å…¶æå–ä¸ºä¸€ä¸ªæ–°ç»„ä»¶å¹¶ä½¿ç”¨ stateã€‚")]),t._v(" "),s("li",[t._v("åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸ºäº† "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useMemo#my-calculation-runs-twice-on-every-re-render",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¸®ä½ å‘ç°æ„å¤–çš„é”™è¯¯"),s("OutboundLink")],1),t._v("ï¼ŒReact å°†ä¼š "),s("strong",[t._v("è°ƒç”¨ä½ çš„è®¡ç®—å‡½æ•°ä¸¤æ¬¡")]),t._v("ã€‚è¿™åªæ˜¯ä¸€ä¸ªå¼€å‘ç¯å¢ƒä¸‹çš„è¡Œä¸ºï¼Œå¹¶ä¸ä¼šå½±å“åˆ°ç”Ÿäº§ç¯å¢ƒã€‚å¦‚æœè®¡ç®—å‡½æ•°æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼ˆå®ƒæœ¬æ¥å°±åº”è¯¥æ˜¯ï¼‰ï¼Œè¿™å°†ä¸ä¼šå½±å“åˆ°ä»£ç é€»è¾‘ã€‚å…¶ä¸­ä¸€æ¬¡çš„è°ƒç”¨ç»“æœå°†è¢«å¿½ç•¥ã€‚")]),t._v(" "),s("li",[t._v("é™¤éæœ‰ç‰¹å®šåŸå› ï¼ŒReact "),s("strong",[t._v("ä¸ä¼šä¸¢å¼ƒç¼“å­˜å€¼")]),t._v("ã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šåœ¨ä½ ç¼–è¾‘ç»„ä»¶æ–‡ä»¶æ—¶ä¸¢å¼ƒç¼“å­˜ã€‚æ— è®ºæ˜¯åœ¨å¼€å‘ç¯å¢ƒè¿˜æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå¦‚æœä½ çš„ç»„ä»¶åœ¨åˆå§‹æŒ‚è½½æœŸé—´è¢«ç»ˆæ­¢ï¼ŒReact éƒ½ä¼šä¸¢å¼ƒç¼“å­˜ã€‚åœ¨æœªæ¥ï¼ŒReact å¯èƒ½ä¼šæ·»åŠ æ›´å¤šåˆ©ç”¨ä¸¢å¼ƒç¼“å­˜çš„ç‰¹æ€§â€”â€”ä¾‹å¦‚ï¼Œå¦‚æœ React åœ¨æœªæ¥å¢åŠ äº†å¯¹è™šæ‹ŸåŒ–åˆ—è¡¨çš„å†…ç½®æ”¯æŒï¼Œé‚£ä¹ˆä¸¢å¼ƒé‚£äº›æ»šå‡ºè™šæ‹ŸåŒ–åˆ—è¡¨è§†å£çš„ç¼“å­˜æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä½ å¯ä»¥ä»…ä»…ä¾èµ– "),s("code",[t._v("useMemo")]),t._v(" ä½œä¸ºæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚å¦åˆ™ï¼Œä½¿ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#avoiding-recreating-the-initial-state",target:"_blank",rel:"noopener noreferrer"}},[t._v("state å˜é‡"),s("OutboundLink")],1),t._v(" æˆ–è€… "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useRef#avoiding-recreating-the-ref-contents",target:"_blank",rel:"noopener noreferrer"}},[t._v("ref"),s("OutboundLink")],1),t._v(" å¯èƒ½æ›´åŠ åˆé€‚ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-7"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—"}},[t._v("#")]),t._v(" è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—")]),t._v(" "),s("p",[t._v("ä½ éœ€è¦ç»™ "),s("code",[t._v("useMemo")]),t._v(" ä¼ é€’ä¸¤æ ·ä¸œè¥¿ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°çš„ calculation å‡½æ•°ï¼Œåƒè¿™æ · "),s("code",[t._v("() =>")]),t._v("ï¼Œå¹¶ä¸”è¿”å›ä»»ä½•ä½ æƒ³è¦çš„è®¡ç®—ç»“æœã€‚")]),t._v(" "),s("li",[t._v("ä¸€ä¸ªç”±åŒ…å«åœ¨ä½ çš„ç»„ä»¶ä¸­å¹¶åœ¨ calculation ä¸­ä½¿ç”¨çš„æ‰€æœ‰å€¼ç»„æˆçš„ä¾èµ–åˆ—è¡¨ã€‚")])]),t._v(" "),s("p",[t._v("åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼ŒuseMemo æä¾›çš„å€¼å°†æ˜¯ calculation å‡½æ•°çš„æ‰§è¡Œç»“æœï¼›åœ¨åç»­æ¸²æŸ“æ—¶ï¼Œå¦‚æœä¾èµ–åˆ—è¡¨ä¸­çš„ä¾èµ–é¡¹æ²¡æœ‰å˜åŒ–ï¼ŒuseMemo å°†ä¼šè¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœã€‚å¦åˆ™ React ä¼šé‡æ–°è°ƒç”¨ calculation å‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å€¼ã€‚")]),t._v(" "),s("h4",{attrs:{id:"è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“"}},[t._v("#")]),t._v(" è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“")]),t._v(" "),s("p",[s("strong",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact ä¼šé€’å½’åœ°é‡æ–°æ¸²æŸ“å®ƒçš„æ‰€æœ‰å­ç»„ä»¶")]),t._v("ã€‚å¦‚æœä¸æƒ³è®©å­ç»„ä»¶åœ¨ props æœªå˜çš„æƒ…å†µä¸‹é‡æ–°æ¸²æŸ“ï¼Œå¯ä»¥ä½¿ç”¨"),s("code",[t._v("memo")]),t._v("å°†å…¶åŒ…è£¹ï¼Œå¹¶ç»“åˆ useMemo å¯¹ä¼ å…¥çš„å¯¹è±¡ç±»å‹ props è¿›è¡Œç¼“å­˜ã€‚")]),t._v(" "),s("h4",{attrs:{id:"ç¼“å­˜ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"}},[t._v("#")]),t._v(" ç¼“å­˜ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°")]),t._v(" "),s("p",[t._v("å¦‚æœæŸä¸ªè®¡ç®—é€šè¿‡ useMemo åŒ…è£…ï¼Œå¹¶ä¸”å®ƒçš„ä¾èµ–åˆ—è¡¨ä¸­çš„å¯¹è±¡æˆ–è€…å‡½æ•°æ˜¯åœ¨ç»„ä»¶ä¸»ä½“ä¸­åˆ›å»ºçš„ï¼Œè¯·æŠŠè¿™äº›å€¼ä¹Ÿé€šè¿‡ useMemo è¿›è¡ŒåŒ…è£…ï¼Œå¦åˆ™ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œè§¦å‘æœ€å¼€å§‹çš„è®¡ç®—å‡½æ•°è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå¯¼è‡´ useMemo å¤±æ•ˆã€‚")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Dropdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" allItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const searchOptions = { matchMode: 'whole-word', text };")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨ useMemo å°† searchOptions ä¹Ÿè¿›è¡ŒåŒ…è£¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" searchOptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" matchMode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'whole-word'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… åªæœ‰å½“ text æ”¹å˜æ—¶æ‰ä¼šå‘ç”Ÿæ”¹å˜")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" visibleItems "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchItems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("allItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" searchOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("allItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" searchOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… åªæœ‰å½“ allItems æˆ– serachOptions æ”¹å˜æ—¶æ‰ä¼šå‘ç”Ÿæ”¹å˜")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨-usememo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨-usememo"}},[t._v("#")]),t._v(" å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨ useMemo")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReportList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" items "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("article"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Report key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("article"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Report")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… åœ¨é¡¶å±‚è°ƒç”¨ useMemoï¼š")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateReport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("figure"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Chart data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("figure"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("h2",{attrs:{id:"usecallback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),s("h3",{attrs:{id:"usecallback-fn-dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecallback-fn-dependencies"}},[t._v("#")]),t._v(" useCallback(fn, dependencies)")]),t._v(" "),s("p",[s("strong",[t._v("å‚æ•°")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fn")]),t._v("ï¼šæƒ³è¦ç¼“å­˜çš„å‡½æ•°ã€‚æ­¤å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•å‚æ•°å¹¶ä¸”è¿”å›ä»»ä½•å€¼ã€‚åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼ŒReact å°†æŠŠå‡½æ•°è¿”å›ç»™ä½ ï¼ˆè€Œä¸æ˜¯è°ƒç”¨å®ƒï¼ï¼‰ã€‚å½“è¿›è¡Œä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œå¦‚æœ "),s("code",[t._v("dependencies")]),t._v(" ç›¸æ¯”äºä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶æ²¡æœ‰æ”¹å˜ï¼Œé‚£ä¹ˆ React å°†ä¼šè¿”å›ç›¸åŒçš„å‡½æ•°ã€‚å¦åˆ™ï¼ŒReact å°†è¿”å›åœ¨æœ€æ–°ä¸€æ¬¡æ¸²æŸ“ä¸­ä¼ å…¥çš„å‡½æ•°ï¼Œå¹¶ä¸”å°†å…¶ç¼“å­˜ä»¥ä¾¿ä¹‹åä½¿ç”¨ã€‚React ä¸ä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›æ­¤å‡½æ•°ã€‚ä½ å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨ä»¥åŠæ˜¯å¦è°ƒç”¨ã€‚")]),t._v(" "),s("li",[s("code",[t._v("dependencies")]),t._v("ï¼šæœ‰å…³æ˜¯å¦æ›´æ–° "),s("code",[t._v("fn")]),t._v(" çš„æ‰€æœ‰å“åº”å¼å€¼çš„ä¸€ä¸ªåˆ—è¡¨ã€‚å“åº”å¼å€¼åŒ…æ‹¬ propsã€stateï¼Œå’Œæ‰€æœ‰åœ¨ä½ ç»„ä»¶å†…éƒ¨ç›´æ¥å£°æ˜çš„å˜é‡å’Œå‡½æ•°ã€‚å¦‚æœä½ çš„ä»£ç æ£€æŸ¥å·¥å…· "),s("a",{attrs:{href:"https://zh-hans.react.dev/learn/editor-setup#linting",target:"_blank",rel:"noopener noreferrer"}},[t._v("é…ç½®äº† React"),s("OutboundLink")],1),t._v("ï¼Œé‚£ä¹ˆå®ƒå°†æ ¡éªŒæ¯ä¸€ä¸ªæ­£ç¡®æŒ‡å®šä¸ºä¾èµ–çš„å“åº”å¼å€¼ã€‚ä¾èµ–åˆ—è¡¨å¿…é¡»å…·æœ‰ç¡®åˆ‡æ•°é‡çš„é¡¹ï¼Œå¹¶ä¸”å¿…é¡»åƒ "),s("code",[t._v("[dep1, dep2, dep3]")]),t._v(" è¿™æ ·ç¼–å†™ã€‚React ä½¿ç”¨ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Object.is")]),s("OutboundLink")],1),t._v(" æ¯”è¾ƒæ¯ä¸€ä¸ªä¾èµ–å’Œå®ƒçš„ä¹‹å‰çš„å€¼ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿”å›")])]),t._v(" "),s("p",[t._v("åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œ"),s("code",[t._v("useCallback")]),t._v(" è¿”å›ä½ å·²ç»ä¼ å…¥çš„ "),s("code",[t._v("fn")]),t._v(" å‡½æ•°")]),t._v(" "),s("p",[t._v("åœ¨ä¹‹åçš„æ¸²æŸ“ä¸­, å¦‚æœä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œ"),s("code",[t._v("useCallback")]),t._v(" è¿”å›ä¸Šä¸€æ¬¡æ¸²æŸ“ä¸­ç¼“å­˜çš„ "),s("code",[t._v("fn")]),t._v(" å‡½æ•°ï¼›å¦åˆ™è¿”å›è¿™ä¸€æ¬¡æ¸²æŸ“ä¼ å…¥çš„ "),s("code",[t._v("fn")]),t._v("ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„äº‹é¡¹")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("useCallback")]),t._v(" æ˜¯ä¸€ä¸ª Hookï¼Œæ‰€ä»¥åº”è¯¥åœ¨ "),s("strong",[t._v("ç»„ä»¶çš„é¡¶å±‚")]),t._v(" æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨ã€‚ä½ ä¸åº”åœ¨å¾ªç¯æˆ–è€…æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœä½ éœ€è¦è¿™æ ·åšï¼Œè¯·æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œå¹¶å°† state ç§»å…¥å…¶ä¸­ã€‚")]),t._v(" "),s("li",[t._v("é™¤éæœ‰ç‰¹å®šçš„ç†ç”±ï¼ŒReact "),s("strong",[t._v("å°†ä¸ä¼šä¸¢å¼ƒå·²ç¼“å­˜çš„å‡½æ•°")]),t._v("ã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå½“ç¼–è¾‘ç»„ä»¶æ–‡ä»¶æ—¶ï¼ŒReact ä¼šä¸¢å¼ƒç¼“å­˜ã€‚åœ¨ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒä¸­ï¼Œå¦‚æœä½ çš„ç»„ä»¶åœ¨åˆæ¬¡æŒ‚è½½ä¸­æš‚åœï¼ŒReact å°†ä¼šä¸¢å¼ƒç¼“å­˜ã€‚åœ¨æœªæ¥ï¼ŒReact å¯èƒ½ä¼šå¢åŠ æ›´å¤šåˆ©ç”¨äº†ä¸¢å¼ƒç¼“å­˜æœºåˆ¶çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ React æœªæ¥å†…ç½®äº†å¯¹è™šæ‹Ÿåˆ—è¡¨çš„æ”¯æŒï¼Œé‚£ä¹ˆåœ¨æ»šåŠ¨è¶…å‡ºè™šæ‹ŸåŒ–è¡¨è§†å£çš„é¡¹ç›®æ—¶ï¼ŒæŠ›å¼ƒç¼“å­˜æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¦‚æœä½ ä¾èµ– "),s("code",[t._v("useCallback")]),t._v(" ä½œä¸ºä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–é€”å¾„ï¼Œé‚£ä¹ˆè¿™äº›å¯¹ä½ ä¼šæœ‰å¸®åŠ©ã€‚å¦åˆ™è¯·è€ƒè™‘ä½¿ç”¨ "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useState#im-trying-to-set-state-to-a-function-but-it-gets-called-instead",target:"_blank",rel:"noopener noreferrer"}},[t._v("state å˜é‡"),s("OutboundLink")],1),t._v(" æˆ– "),s("a",{attrs:{href:"https://zh-hans.react.dev/reference/react/useRef#avoiding-recreating-the-ref-contents",target:"_blank",rel:"noopener noreferrer"}},[t._v("ref"),s("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç”¨æ³•-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•-8"}},[t._v("#")]),t._v(" ç”¨æ³•")]),t._v(" "),s("h4",{attrs:{id:"è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“-2"}},[t._v("#")]),t._v(" è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“")]),t._v(" "),s("p",[t._v("ä½ éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ç»™ "),s("code",[t._v("useCallback")]),t._v("ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­éœ€è¦ç¼“å­˜çš„å‡½æ•°")]),t._v(" "),s("li",[t._v("å‡½æ•°å†…éƒ¨éœ€è¦ä½¿ç”¨åˆ°çš„æ‰€æœ‰ç»„ä»¶å†…éƒ¨å€¼çš„ä¾èµ–åˆ—è¡¨ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ React å°†é€’å½’æ¸²æŸ“å®ƒçš„æ‰€æœ‰å­ç»„ä»¶")]),t._v("ã€‚å¦‚æœä¸æƒ³è®©å­ç»„ä»¶åœ¨ props æœªå˜çš„æƒ…å†µä¸‹é‡æ–°æ¸²æŸ“ï¼Œå¯ä»¥ä½¿ç”¨"),s("code",[t._v("memo")]),t._v("å°†å…¶åŒ…è£¹ï¼Œå¹¶ç»“åˆ useCallback å¯¹ä¼ å…¥çš„å‡½æ•°ç±»å‹ props è¿›è¡Œç¼“å­˜ã€‚")]),t._v(" "),s("h4",{attrs:{id:"ä¼˜åŒ–è‡ªå®šä¹‰-hook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–è‡ªå®šä¹‰-hook"}},[t._v("#")]),t._v(" ä¼˜åŒ–è‡ªå®šä¹‰ Hook")]),t._v(" "),s("p",[t._v("å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œå»ºè®®å°†å®ƒè¿”å›çš„ä»»ä½•å‡½æ•°åŒ…è£¹åœ¨ "),s("code",[t._v("useCallback")]),t._v(" ä¸­ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dispatch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RouterStateContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" navigate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navigate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" goBack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'back'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        navigate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        goBack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™ç¡®ä¿äº† Hook çš„ä½¿ç”¨è€…åœ¨éœ€è¦æ—¶èƒ½å¤Ÿä¼˜åŒ–è‡ªå·±çš„ä»£ç ã€‚")]),t._v(" "),s("h4",{attrs:{id:"å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨-usememo-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨-usememo-2"}},[t._v("#")]),t._v(" å¾ªç¯çš„åˆ—è¡¨é¡¹ä¸­ä½¿ç”¨ useMemo")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReportList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" items "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("article"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Report key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("article"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Report")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… åœ¨æœ€é¡¶å±‚è°ƒç”¨ useCallback")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handleClick "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendReport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("figure"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Chart onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("figure"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);